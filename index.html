<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text Tool</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto&family=Roboto+Condensed&family=Roboto+Mono&family=Oswald&family=Merriweather&family=Ubuntu&family=Nunito&family=Indie+Flower&family=Bangers&family=Amatic+SC&family=Permanent+Marker&family=Patrick+Hand&family=Jura&family=Josefin+Sans&family=Grenze+Gotisch&family=Fredoka+One&family=Fondamento&family=Denk+One&family=Creepster&family=Kalam&family=Luckiest+Guy&family=Titillium+Web&family=Special+Elite&family=Sarpanch&family=Source+Sans+Pro&family=Gotham&family=EB+Garamond&family=Bodoni+Moda&family=Cinzel&family=Cinzel+Decorative&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="box">
            <h1>Reverse Text</h1>
            <form name="form1">
                <textarea id="Input" name="Input" rows="10" placeholder="Enter text here..." oninput="reverseIt()"></textarea>
                <textarea id="Output" name="Output" rows="10" placeholder="The reversed text will appear here..." readonly></textarea>

                <div class="checkbox-group">
                    <label>
                        <input type="checkbox" name="Numbers" checked onchange="reverseIt()">
                        Don't Reverse Numbers
                    </label>
                    <label>
                        <input type="checkbox" name="Dashes" checked onchange="reverseIt()">
                        Don't Reverse Dashes and Punctuation (./:-)
                    </label>
                </div>
            </form>
        </div>

        <div class="box">
            <h1>Text Styling</h1>
            <div class="display-text" id="displayText" style="font-family: Roboto; color: rgb(0, 0, 0);"></div>
            <form>
                <div class="html-output" id="htmlOutput" style="direction: ltr; text-align: left;">&lt;font color=&quot;#ffffff&quot; face=&quot;Roboto&quot;&gt;&lt;/font&gt;</div>
                <label for="inputText">Text</label>
                <input type="text" id="inputText" class="form-control">

                <label for="inputColor">Color</label>
                <input type="color" id="inputColor" value="#FFFFFF" class="form-control">

                <label for="inputFont">Font</label>
                <select id="inputFont" class="form-select" style="color: white;">
                    <option value="Roboto">Roboto</option>
                   <option value="Roboto Condensed">Roboto Condensed</option>
                   <option value="Roboto Mono">Roboto Mono</option>
                   <option value="Oswald">Oswald</option>
                   <option value="Merriweather">Merriweather</option>
                   <option value="Ubuntu">Ubuntu</option>
                   <option value="Nunito">Nunito</option>
                   <option value="Indie Flower">Indie Flower</option>
                   <option value="Bangers">Bangers</option>
                   <option value="Amatic SC">Amatic SC</option>
                   <option value="Permanent Marker">Permanent Marker</option>
                   <option value="Patrick Hand">Patrick Hand</option>
                   <option value="Jura">Jura</option>
                   <option value="Josefin Sans">Josefin Sans</option>
                   <option value="Grenze Gotisch">Grenze Gotisch</option>
                   <option value="Fredoka One">Fredoka One</option>
                   <option value="Fondamento">Fondamento</option>
                   <option value="Denk One">Denk One</option>
                   <option value="Creepster">Creepster</option>
                   <option value="Kalam">Kalam</option>
                   <option value="Luckiest Guy">Luckiest Guy</option>
                   <option value="Titillium Web">Titillium Web</option>
                   <option value="Special Elite">Special Elite</option>
                   <option value="Sarpanch">Sarpanch</option>
                   <option value="Source Sans Pro">Source Sans Pro</option>
                   <option value="Gotham">Gotham</option>
                   <option value="EB Garamond">EB Garamond</option>
                   <option value="Bodoni Moda">Bodoni Moda</option>
                   <option value="Arial">Arial</option>
                   <option value="Cinzel">Cinzel</option>
                   <option value="Cinzel Decorative">Cinzel Decorative</option>
                </select>

                <label for="strokeThickness">Stroke Thickness (0-5)</label>
                <input type="number" id="strokeThickness" class="form-control" min="0" max="5" value="0">

                <label for="strokeColor">Stroke Color</label>
                <input type="color" id="strokeColor" value="#000000" class="form-control">

                <label for="rainbowSetting">Rainbow Text</label>
                <select id="rainbowSetting" class="form-select" style="color: white;">
                    <option value="0">None</option>
                    <option value="1">Left to Right</option>
                    <option value="2">Right to Left</option>
                </select>

                <button type="button" id="copyBtn">Copy</button>
                <button type="button" id="clearBtn">Clear</button>
            </form>
        </div>
    </div>

    <script>
        let rainbowColors = [
            "#ff0000", "#ff4c00", "#ff9900", "#ffe500", "#ccff00", "#80ff00", "#33ff00", "#00ff19", 
            "#00ff66", "#00ffb3", "#00ffff", "#00b3ff", "#0066ff", "#0019ff", "#3300ff", "#8000ff"
        ];

        function reverseIt() {
            const lineBreaks = "\n\r";
            let keepStraight = "";
            if (document.form1.Numbers.checked) keepStraight += "0123456789";
            if (document.form1.Dashes.checked) keepStraight += "./:-";

            const input = document.form1.Input.value;
            let reversed = "";
            let buffer = "";

            for (let char of input) {
                if (lineBreaks.includes(char)) {
                    reversed = buffer + reversed;
                    buffer = "";
                    reversed = char + reversed;
                } else if (keepStraight.includes(char)) {
                    buffer += char;
                } else {
                    reversed = buffer + reversed;
                    buffer = "";
                    reversed = char + reversed;
                }
            }

            reversed = buffer + reversed;
            document.form1.Output.value = reversed;
        }

        document.getElementById('clearBtn').addEventListener('click', () => {
            document.getElementById('inputText').value = "";
            document.getElementById('displayText').textContent = "";
            document.getElementById('htmlOutput').textContent = '<font color="#ffffff" face="Roboto"></font>';
            document.getElementById('inputColor').value = "#FFFFFF";
            document.getElementById('inputFont').value = "Roboto";
            document.getElementById('strokeThickness').value = "0";
            document.getElementById('strokeColor').value = "#000000";
            document.getElementById('rainbowSetting').value = "0";
        });

        document.querySelectorAll('#inputText, #inputColor, #inputFont, #strokeThickness, #strokeColor, #rainbowSetting').forEach(input => {
            input.addEventListener('input', updateText);
        });

        document.getElementById('copyBtn').addEventListener('click', () => {
            const htmlOutput = document.getElementById('htmlOutput').textContent;
            navigator.clipboard.writeText(htmlOutput).then(() => {
                // Removed alert per user's preference
            });
        });

        function updateText() {
            const text = document.getElementById('inputText').value;
            const color = document.getElementById('inputColor').value;
            const font = document.getElementById('inputFont').value;
            const stroke = document.getElementById('strokeThickness').value;
            const strokeColor = document.getElementById('strokeColor').value;
            const rainbow = document.getElementById('rainbowSetting').value;

            const display = document.getElementById('displayText');
            display.textContent = text;
            display.style.color = color;
            display.style.fontFamily = font;
            display.style.textShadow = stroke > 0 ? `0 0 ${stroke}px ${strokeColor}` : 'none';

            let rainbowText = '';
            const colorLength = rainbowColors.length;

            if (rainbow == "1" || rainbow == "2") {
                let rainbowArray = text.split('');
                let rainbowArrayWithColors = rainbowArray.map((char, index) => {
                    const color = rainbowColors[index % colorLength];
                    return `<font color="${color}">${char}</font>`;
                });

                if (rainbow == "2") {
                    const reversedColors = rainbowColors.reverse();
                    rainbowArrayWithColors = rainbowArray.map((char, index) => {
                        const color = reversedColors[index % colorLength];
                        return `<font color="${color}">${char}</font>`;
                    });
                }

                rainbowText = rainbowArrayWithColors.join('');

                const htmlOutput = document.getElementById('htmlOutput');
                htmlOutput.textContent = `<font face="${font}"><stroke color="${strokeColor}" thickness="${stroke}">${rainbowText}</stroke></font>`;
                display.innerHTML = `<div class="display-text text-center my-5" style="font-size: 2.5rem; word-break: break-word; line-height: 1; font-family: ${font};">${rainbowText}</div>`;
            } else {
                const htmlOutput = document.getElementById('htmlOutput');
                htmlOutput.textContent = `<font face="${font}"><stroke color="${strokeColor}" thickness="${stroke}">${text}</stroke></font>`;
                display.innerHTML = `<div class="display-text text-center my-5" style="font-size: 2.5rem; word-break: break-word; line-height: 1; font-family: ${font};"><stroke color="${strokeColor}" thickness="${stroke}">${text}</stroke></div>`;
            }
        }
    </script>
</body>
</html>
